<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R Code Gallery</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/gallery.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        .modal-code-block {
            position: relative;
        }
        .copy-code-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: rgba(0, 0, 0, 0.65);
            color: #fff;
            border: none;
            padding: 0.35rem 0.85rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background 0.2s ease;
        }
        .copy-code-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .copy-code-btn.copied {
            background: #2ecc71;
            color: #0c0c0c;
        }
    </style>
</head>
<body class="dark">
    <!-- Background Canvas -->
    <canvas id="background-canvas"></canvas>

    <!-- Top navigation -->
    <nav class="top-nav fade-in">
        <a href="../index.html">Home</a>
        <a href="introduction.html">Introduction</a>
        <a href="r-code.html">R code</a>
        <a href="python-code.html">Python code</a>
        <a href="other-code.html">Other code</a>
    </nav>

    <!-- Main content -->
    <main class="gallery-content fade-in">
        <h1 class="gallery-title">R Code Gallery</h1>
        
        <div class="gallery-grid">

            <!-- Item 1: å †å å›¾1 -->
            <div class="gallery-item">
                <div class="gallery-image-wrapper">
                    <img src="../img/R code/å †å å›¾1.png" alt="å †å å›¾1" class="gallery-image">
                    <div class="gallery-overlay">
                        <button class="view-code-btn" onclick="openModal('modal-1')">æŸ¥çœ‹ä»£ç </button>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">å †å å›¾1</h3>
                    <p class="gallery-item-description">ç›¸å¯¹å †å æ¡å½¢å›¾å±•ç¤ºèƒ½æºæ„æˆéšæ—¶é—´çš„å˜åŒ–</p>
                </div>
            </div>

            <!-- Item 2: å¯†åº¦æŠ˜çº¿å›¾1 -->
            <div class="gallery-item">
                <div class="gallery-image-wrapper">
                    <img src="../img/R code/å¯†åº¦æŠ˜çº¿å›¾1.png" alt="å¯†åº¦æŠ˜çº¿å›¾1" class="gallery-image">
                    <div class="gallery-overlay">
                        <button class="view-code-btn" onclick="openModal('modal-2')">æŸ¥çœ‹ä»£ç </button>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">å¯†åº¦æŠ˜çº¿å›¾1</h3>
                    <p class="gallery-item-description">å¤šå¹´ä»½æœˆåº¦æœ€é«˜æ¸©åº¦çš„å‡å€¼æŠ˜çº¿å›¾</p>
                </div>
            </div>

            <!-- Item 3: çƒ­å›¾1 -->
            <div class="gallery-item">
                <div class="gallery-image-wrapper">
                    <img src="../img/R code/çƒ­å›¾1.png" alt="çƒ­å›¾1" class="gallery-image">
                    <div class="gallery-overlay">
                        <button class="view-code-btn" onclick="openModal('modal-3')">æŸ¥çœ‹ä»£ç </button>
                    </div>
                </div>
                <div class="gallery-info">
                    <h3 class="gallery-item-title">çƒ­å›¾1</h3>
                    <p class="gallery-item-description">æœˆä»½ä¸å¹´ä»½çš„æœ€é«˜æ¸©åº¦çƒ­åŠ›å›¾</p>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer fade-in">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ä»£ç ç©ºé—´</h4>
                    <p>æä¾›ç®€æ´ç¾è§‚çš„ä»£ç ã€‚</p>
                    <div class="footer-social">
                        <a href="https://www.webofscience.com/wos/author/record/491521" class="social-link">Obsidian</a>
                        <a href="https://www.webofscience.com/wos/author/record/491521" class="social-link">Web of Science</a>
                        <a href="https://scholar.google.com/citations?user=FLRq3GEAAAAJ&hl=zh-TW&oi=sra" class="social-link">Google Scholar</a>
                        <a href="https://www.researchgate.net/profile/Guanglin-He-heguanglin-2/research" class="social-link">Research Gate</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>è”ç³»æˆ‘ä»¬</h4>
                    <div class="contact-info">
                        <p>ğŸ“§ gianthuihui@gmail.com</p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer">èœ€ICPå¤‡2025140770å·-3</a> &copy; </p>
            </div>
        </div>
    </footer>

    <!-- Modals for code display -->

    <!-- Modal 1: å †å å›¾1 -->
    <div id="modal-1" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('modal-1')">&times;</span>
            <h2>å †å å›¾1 - R Code</h2>
            <div class="modal-code-block">
                <button class="copy-code-btn" onclick="copyCode('code-1', this)">Copy</button>
                <pre><code id="code-1" class="language-r"># ç›¸å¯¹å †å æ¡å½¢å›¾å±•ç¤ºèƒ½æºæ„æˆéšæ—¶é—´çš„å˜åŒ–
energy |>
  dplyr::filter(year >= 2008) |>
  tidyplot(x = year, y = energy, color = energy_source) |>
  add_barstack_relative()</code></pre>
            </div>
            <div class="modal-image">
                <img src="../img/R code/å †å å›¾1.png" alt="å †å å›¾1">
            </div>
        </div>
    </div>

    <!-- Modal 2: å¯†åº¦æŠ˜çº¿å›¾1 -->
    <div id="modal-2" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('modal-2')">&times;</span>
            <h2>å¯†åº¦æŠ˜çº¿å›¾1 - R Code</h2>
            <div class="modal-code-block">
                <button class="copy-code-btn" onclick="copyCode('code-2', this)">Copy</button>
                <pre><code id="code-2" class="language-r"># å¤šå¹´ä»½æœˆåº¦æœ€é«˜æ¸©åº¦çš„å‡å€¼æŠ˜çº¿å›¾
climate |>
  tidyplot(x = month, y = max_temperature, dodge_width = 0) |>
  add_mean_line(group = year, alpha = 0.08) |>
  add_mean_line() |>
  adjust_x_axis(rotate_labels = 90)</code></pre>
            </div>
            <div class="modal-image">
                <img src="../img/R code/å¯†åº¦æŠ˜çº¿å›¾1.png" alt="å¯†åº¦æŠ˜çº¿å›¾1">
            </div>
        </div>
    </div>

    <!-- Modal 3: çƒ­å›¾1 -->
    <div id="modal-3" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('modal-3')">&times;</span>
            <h2>çƒ­å›¾1 - R Code</h2>
            <div class="modal-code-block">
                <button class="copy-code-btn" onclick="copyCode('code-3', this)">Copy</button>
                <pre><code id="code-3" class="language-r"># æœˆä»½ä¸å¹´ä»½çš„æœ€é«˜æ¸©åº¦çƒ­åŠ›å›¾
climate |>
  tidyplot(x = month, y = year, color = max_temperature) |>
  add_heatmap()</code></pre>
            </div>
            <div class="modal-image">
                <img src="../img/R code/çƒ­å›¾1.png" alt="çƒ­å›¾1">
            </div>
        </div>
    </div>


    <script src="../js/page-load.js"></script>
    <script src="../js/background.js"></script>
    <script src="../js/modal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
    <script>
    function copyCode(codeId, trigger) {
        var codeElement = document.getElementById(codeId);
        if (!codeElement) {
            return;
        }
        var text = codeElement.textContent || codeElement.innerText || "";
        var onSuccess = function() {
            if (!trigger) {
                return;
            }
            var original = trigger.dataset.originalText || trigger.textContent;
            trigger.dataset.originalText = original;
            trigger.textContent = "Copied!";
            trigger.classList.add("copied");
            setTimeout(function() {
                trigger.textContent = trigger.dataset.originalText;
                trigger.classList.remove("copied");
            }, 2000);
        };

        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text).then(onSuccess).catch(function() {
                fallbackCopy(text, trigger, onSuccess);
            });
        } else {
            fallbackCopy(text, trigger, onSuccess);
        }
    }

    function fallbackCopy(text, trigger, callback) {
        var textarea = document.createElement("textarea");
        textarea.value = text;
        textarea.style.position = "fixed";
        textarea.style.opacity = "0";
        document.body.appendChild(textarea);
        textarea.focus();
        textarea.select();
        try {
            document.execCommand("copy");
            callback();
        } catch (err) {
            console.warn("å¤åˆ¶å¤±è´¥:", err);
        }
        document.body.removeChild(textarea);
    }
    </script>
</body>
</html>
